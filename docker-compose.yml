version: '3'

services:
    web:
        build: ./app
        volumes: 
            - ./app:/app
        ports:
            - "5000:5000"
        links:
            - db
    db:
        build: ./db
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_DATABASE: test_db
        ports:
            - "3307:3306"

    generate_data:
        build: ./db/generate_data
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_DATABASE: test_db
        links:
            - db
        profiles:
            - generate_data
